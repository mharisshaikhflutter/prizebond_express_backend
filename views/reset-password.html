<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reset Password</title>
</head>
<body>
  <h2>Reset Your Password</h2>
  <form method="POST" action="/reset-password">
    <input type="hidden" name="token" id="token" />
    <label for="newPassword">New Password:</label><br>
    <input type="password" name="newPassword" required /><br><br>
    <button type="submit">Reset Password</button>
  </form>

<script>
  let token = null;

  // First check query params (?code=...)
  const queryParams = new URLSearchParams(window.location.search);
  if (queryParams.has('code')) {
    token = queryParams.get('code');
  }


console.log("Form Code:", token);


  // If not found, check hash (#access_token=...)
  if (!token && window.location.hash) {
    const hashParams = new URLSearchParams(window.location.hash.substring(1));
    if (hashParams.has('access_token')) {
      token = hashParams.get('access_token');
    }
  }
console.log("Form token:", document.getElementById('token').value);

  // Set the token into the hidden field
  if (token) {
    document.getElementById('token').value = token;
  }
</script>
</body>
</html>
